(this["webpackJsonpreact-learn-1"]=this["webpackJsonpreact-learn-1"]||[]).push([[7],{311:function(e,n,t){"use strict";t.d(n,"a",(function(){return l}));var s=t(7),r=t(305),i=(t(0),t(49)),c=t(14),u=t(6),a=["isAuth"],o=function(e){return{isAuth:e.auth.isAuth}};function l(e){return Object(i.b)(o)((function(n){var t=n.isAuth,i=Object(r.a)(n,a);return t?Object(u.jsx)(e,Object(s.a)({},i)):Object(u.jsx)(c.a,{to:"/login"})}))}},378:function(e,n,t){e.exports={find_users_wrapper:"FindUsers_find_users_wrapper__Z15D9",find_users_show_more:"FindUsers_find_users_show_more__2lUKW"}},379:function(e,n,t){e.exports={find_users_user:"User_find_users_user__vNYC2",find_users_user_image:"User_find_users_user_image__3bIGa",find_users_user_info:"User_find_users_user_info__1ieq2",find_users_link_wrapper:"User_find_users_link_wrapper__1YHun",find_users_user_buttons:"User_find_users_user_buttons__3YlAg",find_users_btn_add_remove:"User_find_users_btn_add_remove__3cinY"}},383:function(e,n,t){e.exports={user_search_form:"UserSearchForm_user_search_form__tO-F3"}},391:function(e,n,t){"use strict";t.r(n);var s=t(49),r=t(134),i=t(0),c=t.n(i),u=t(304),a=t(378),o=t.n(a),l=t(38),d=t(379),f=t.n(d),_=t(6),j=function(e){var n=Object(i.createRef)(),t=Object(i.useState)(void 0),s=Object(u.a)(t,2),r=s[0],c=s[1],a=Object(i.useState)(void 0),o=Object(u.a)(a,2),d=o[0],j=o[1],b=Object(i.useState)(!0),O=Object(u.a)(b,2),h=O[0],m=O[1];return Object(i.useEffect)((function(){m(!1)}),[]),Object(i.useEffect)((function(){var e,t;c(null===(e=n.current)||void 0===e?void 0:e.getBoundingClientRect().top),j(null===(t=n.current)||void 0===t?void 0:t.getBoundingClientRect().bottom)}),[e.recalculatePosition,n,r,d]),Object(_.jsx)(_.Fragment,{children:h||r<window.innerHeight+1e3&&d>-1e3?Object(_.jsxs)("div",{ref:n,className:f.a.find_users_user,children:[Object(_.jsx)(l.b,{to:"/profile/"+e.id,children:Object(_.jsxs)("div",{className:f.a.find_users_link_wrapper,children:[Object(_.jsx)("div",{className:f.a.find_users_user_image,children:Object(_.jsx)("img",{src:e.UserImage.large||e.UserImage.small||"http://assets.stickpng.com/thumbs/585e4beacb11b227491c3399.png",alt:""})}),Object(_.jsx)("div",{className:f.a.find_users_user_info,children:e.UserDescription})]})}),Object(_.jsx)("div",{className:f.a.find_users_user_buttons,children:e.followed?Object(_.jsx)("button",{disabled:e.isFollowingInProgress.some((function(n){return n===e.id})),className:f.a.find_users_btn_add_remove,onClick:function(){e.unfollow(e.id)},children:"Remove from list"}):Object(_.jsx)("button",{disabled:e.isFollowingInProgress.some((function(n){return n===e.id})),className:f.a.find_users_btn_add_remove,onClick:function(){e.follow(e.id)},children:"Add to list"})})]}):Object(_.jsx)("div",{ref:n})})},b=t(294),O=t(385),h=t(383),m=t.n(h),v=t(386),p=function(e){return e.UserPageData.isFollowingInProgress},g=Object(v.a)((function(e){return e.UserPageData.UsersData}),(function(e){return e.filter((function(e){return!0}))})),w=function(e){return e.UserPageData.isFetching},x=function(e){return e.UserPageData.filter},U=c.a.memo((function(e){var n=e.setFilter,t=Object(i.useRef)(null),r=Object(i.useState)(!1),c=Object(u.a)(r,2),a=c[0],o=c[1],l=Object(s.d)(x),d=function(e){var t={search:null};return e.search||(a?(o(!1),n("",null)):e.friend||(t.search="Required")),t};return Object(_.jsx)("div",{children:Object(_.jsx)(O.d,{enableReinitialize:!0,initialValues:{search:l.term,friend:l.friend},validate:function(){return d},onSubmit:function(e,t){var s=t.setSubmitting;n(e.search,e.friend),s(!1),o(!0)},children:function(e){var n=e.isSubmitting;return Object(_.jsxs)(O.c,{onKeyPress:function(e){var n;"Enter"===e.key&&(null===(n=t.current)||void 0===n||n.click())},className:m.a.user_search_form,children:[Object(_.jsx)(O.b,{type:"search",name:"search"}),Object(_.jsxs)(O.b,{name:"friend",as:"select",value:"undefined",children:[Object(_.jsx)("option",{value:"null",children:"All"}),Object(_.jsx)("option",{value:"true",children:"Only followed"}),Object(_.jsx)("option",{value:"false",children:"Only unfollowed"})]}),Object(_.jsx)(O.a,{name:"error"}),Object(_.jsx)(b.a,{ref:t,htmlType:"submit",disabled:n,children:"Find"})]})}})})})),F=function(e){var n=e.follow,t=e.unfollow,r=e.setFilter,c=e.showMoreUsers,a=Object(s.d)(g),l=Object(s.d)(p),d=Object(s.d)((function(e){return e.UserPageData.countPageMayRecieved})),f=Object(i.useState)(!1),b=Object(u.a)(f,2),O=b[0],h=b[1];return Object(i.useEffect)((function(){h(!1)}),[O]),Object(_.jsxs)("div",{onScroll:function(){h(!0)},className:o.a.find_users_wrapper,children:[Object(_.jsx)(U,{setFilter:r}),Object(_.jsx)("div",{className:o.a.find_users_items,children:Object(_.jsx)("div",{className:o.a.find_users_item,children:a.map((function(e){return Object(_.jsx)(j,{recalculatePosition:O,UserImage:e.photos,UserDescription:e.name,id:e.id,followed:e.followed,isFollowingInProgress:l,follow:n,unfollow:t},e.id)}))})}),1!==d?Object(_.jsx)("div",{className:o.a.find_users_show_more,children:Object(_.jsx)("button",{onClick:c,children:"Show more"})}):null]})},P=t(79),N=t(311),k=t(14);n.default=Object(N.a)((function(e){var n=Object(s.c)(),t=Object(k.g)(),c=Object(s.d)(x),u=Object(s.d)(w),a=Object(i.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n(r.a.setFilter(e,o(t)))}),[n]),o=function(e){return null!==e?"null"===e?null:"true"===e:null===e||void 0===e?null:void 0};return Object(i.useEffect)((function(){n(Object(r.d)())}),[c,n]),Object(i.useEffect)((function(){var e=new URLSearchParams(window.location.search),n=e.get("term"),t=e.get("friend");null===n&&null===t||a(n,t)}),[a]),Object(i.useEffect)((function(){""!==c.term?null===c.friend?t.push({pathname:"/findUsers",search:"term=".concat(c.term)}):t.push({pathname:"/findUsers",search:"term=".concat(c.term,"&friend=").concat(c.friend)}):t.push({pathname:"/findUsers",search:""})}),[c,t]),Object(_.jsxs)("div",{children:[u?Object(_.jsx)(P.a,{}):null,Object(_.jsx)(F,{follow:function(e){n(Object(r.b)(e))},unfollow:function(e){n(Object(r.e)(e))},setFilter:a,showMoreUsers:function(){n(Object(r.c)())}})]})}))}}]);
//# sourceMappingURL=7.39d1b30a.chunk.js.map