(this["webpackJsonpreact-learn-1"]=this["webpackJsonpreact-learn-1"]||[]).push([[4],{304:function(t,e,s){"use strict";s.d(e,"a",(function(){return o}));var a=s(106);function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var s=[],a=!0,o=!1,r=void 0;try{for(var n,i=t[Symbol.iterator]();!(a=(n=i.next()).done)&&(s.push(n.value),!e||s.length!==e);a=!0);}catch(c){o=!0,r=c}finally{try{a||null==i.return||i.return()}finally{if(o)throw r}}return s}}(t,e)||Object(a.a)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},306:function(t,e,s){"use strict";s.d(e,"b",(function(){return a})),s.d(e,"a",(function(){return o}));var a=function(t){if(!t)return"Field is required"},o=function(t){return function(e){if(e&&e.length>t)return"Max len is ".concat(t," symb")}}},307:function(t,e,s){"use strict";s.d(e,"b",(function(){return b})),s.d(e,"a",(function(){return d}));var a=s(7),o=s(305),r=s(308),n=s.n(r),i=(s(0),s(6)),c=["meta","children"],u=["input","meta"],l=["input","meta"],j=function(t){var e=t.meta,s=e.touched,a=e.error,r=t.children,u=(Object(o.a)(t,c),s&&a);return Object(i.jsxs)("div",{className:n.a.form_control+" "+(u&&n.a.error),children:[Object(i.jsx)("div",{children:r}),Object(i.jsx)("div",{children:u&&Object(i.jsx)("span",{children:a})})]})},b=function(t){var e=t.input,s=(t.meta,Object(o.a)(t,u));return Object(i.jsx)(j,Object(a.a)(Object(a.a)({},t),{},{children:Object(i.jsx)("textarea",Object(a.a)(Object(a.a)({},e),s))}))},d=function(t){var e=t.input,s=(t.meta,Object(o.a)(t,l));return Object(i.jsx)(j,Object(a.a)(Object(a.a)({},t),{},{children:Object(i.jsx)("input",Object(a.a)(Object(a.a)({},e),s))}))}},308:function(t,e,s){t.exports={form_control:"FormsControl_form_control__36Uzx",error:"FormsControl_error__3o0CI"}},311:function(t,e,s){"use strict";s.d(e,"a",(function(){return l}));var a=s(7),o=s(305),r=(s(0),s(49)),n=s(14),i=s(6),c=["isAuth"],u=function(t){return{isAuth:t.auth.isAuth}};function l(t){return Object(r.b)(u)((function(e){var s=e.isAuth,r=Object(o.a)(e,c);return s?Object(i.jsx)(t,Object(a.a)({},r)):Object(i.jsx)(n.a,{to:"/login"})}))}},318:function(t,e,s){t.exports={info_about_user__avatar:"ProfileInfo_info_about_user__avatar__vF1yr",edit_mode_btn:"ProfileInfo_edit_mode_btn__2CutD",info_about_user:"ProfileInfo_info_about_user__2Rckk",info_about_user__text:"ProfileInfo_info_about_user__text__3qRKf",user_avatar:"ProfileInfo_user_avatar__2eu-_",user_status:"ProfileInfo_user_status__29qYU",user_status_text:"ProfileInfo_user_status_text__t3eBF",avatar_name_user:"ProfileInfo_avatar_name_user__ABojO",profile_status:"ProfileInfo_profile_status__15ASI"}},375:function(t,e,s){t.exports={top_image:"Profile_top_image__y6nuZ"}},376:function(t,e,s){t.exports={my_posts:"MyPosts_my_posts__z7Pfw",my_posts__input:"MyPosts_my_posts__input__18h1Q"}},377:function(t,e,s){t.exports={my_post__post_item:"Post_my_post__post_item__nEMaK"}},390:function(t,e,s){"use strict";s.r(e);var a=s(7),o=s(113),r=s(114),n=s(133),i=s(131),c=s(0),u=s.n(c),l=s(49),j=s(375),b=s.n(j),d=s(169),_=s(170),f=s(376),p=s.n(f),m=s(377),O=s.n(m),h=s(6),v=function(t){return Object(h.jsx)("div",{className:O.a.my_post__post_item,children:t.message})},x=s(306),g=s(307),P=Object(x.a)(10),y=u.a.memo((function(t){var e=t.PostsData.map((function(t){return Object(h.jsx)(v,{message:t.message},t.id)}));return Object(h.jsxs)("div",{className:p.a.my_posts,children:[Object(h.jsx)("span",{children:"My posts"}),Object(h.jsx)("div",{className:p.a.my_post__make,children:Object(h.jsx)(S,{onSubmit:function(e){t.internalAddPost(e.newPostText)}})}),Object(h.jsx)("div",{className:p.a.my_post__posts,children:e})]})})),S=Object(_.a)({form:"MyPostsForm"})((function(t){var e=Object(c.useRef)(null);return Object(h.jsxs)("form",{onKeyPress:function(t){var s;"Enter"===t.key&&(null===(s=e.current)||void 0===s||s.click())},onSubmit:t.handleSubmit,className:p.a.my_posts__input,children:[Object(h.jsx)(d.a,{validate:[x.b,P],component:g.b,name:"newPostText",placeholder:"Add new post text"}),Object(h.jsx)("button",{children:"Add post"})]})})),k=y,N=s(107),I=Object(l.b)((function(t){return{PostsData:t.ProfileData.PostsData}}),{internalAddPost:N.a.addPostActionCreator})(k),A=s(304),w=s(79),F=s(318),D=s.n(F),M=function(t){var e=Object(c.useState)(!1),s=Object(A.a)(e,2),a=s[0],o=s[1],r=Object(c.useState)(t.status),n=Object(A.a)(r,2),i=n[0],u=n[1];Object(c.useEffect)((function(){u(t.status)}),[t.status]);return Object(h.jsx)("div",{className:D.a.profile_status,children:a?Object(h.jsx)("input",{autoFocus:!0,onBlur:function(){o(!1),t.updateStatus(i)},onChange:function(t){u(t.currentTarget.value)},value:i}):Object(h.jsx)("div",{className:D.a.profile_status_text,children:Object(h.jsx)("span",{onDoubleClick:function(){o(!0)},children:t.status})})})},C=Object(_.a)({form:"EditProfile"})((function(t){var e=t.status,s=t.updateStatus,a=t.handleSubmit;return Object(h.jsxs)("form",{onSubmit:a,children:[Object(h.jsx)("div",{children:Object(h.jsx)("button",{children:"Save"})}),Object(h.jsxs)("div",{className:D.a.user_status,children:[Object(h.jsx)("span",{className:D.a.user_status_text,children:Object(h.jsx)("b",{children:"Status:"})}),Object(h.jsx)(M,{status:e,updateStatus:s})]}),Object(h.jsxs)("div",{className:D.a.user_looking_for_a_job,children:[Object(h.jsx)("b",{children:"Looking for a job:"})," ",Object(h.jsx)(d.a,{component:g.a,name:"lookingForAJob",placeholder:"Looking for a job",type:"checkbox"})]}),Object(h.jsxs)("div",{className:D.a.user_looking_for_a_job,children:[Object(h.jsx)("b",{children:"Looking for a job description:"})," ",Object(h.jsx)(d.a,{validate:[x.b],component:g.a,name:"lookingForAJobDescription",placeholder:"Looking for a job description"})]}),Object(h.jsxs)("div",{className:D.a.user_looking_for_a_job,children:[Object(h.jsx)("b",{children:"Full name:"})," ",Object(h.jsx)(d.a,{component:g.a,validate:[x.b],name:"fullName",placeholder:"Full name"})]}),Object(h.jsxs)("div",{className:D.a.user_looking_for_a_job,children:[Object(h.jsx)("b",{children:"About me:"})," ",Object(h.jsx)(d.a,{component:g.a,validate:[x.b],name:"aboutMe",placeholder:"About me"})]})]})})),E=function(t){var e=t.status,s=t.updateStatus,a=t.profile,o=t.isOwner,r=t.toEditMode;return Object(h.jsxs)("div",{className:D.a.user_info,children:[o?Object(h.jsx)("div",{className:D.a.edit_mode_btn,children:Object(h.jsx)("button",{onClick:r,children:"Edit mode"})}):Object(h.jsx)(h.Fragment,{}),Object(h.jsxs)("div",{className:D.a.user_status,children:[Object(h.jsx)("span",{className:D.a.user_status_text,children:Object(h.jsx)("b",{children:"Status:"})}),Object(h.jsx)(M,{status:e,updateStatus:s})]}),Object(h.jsxs)("div",{className:D.a.user_looking_for_a_job,children:[Object(h.jsx)("b",{children:"Looking for a job:"})," ",(null===a||void 0===a?void 0:a.lookingForAJob)?"yes":"no"]}),Object(h.jsxs)("div",{className:D.a.user_looking_for_a_job,children:[Object(h.jsx)("b",{children:"About me:"})," ",null===a||void 0===a?void 0:a.aboutMe]})]})},U=function(t){var e,s,o=Object(c.useState)(!1),r=Object(A.a)(o,2),n=r[0],i=r[1];if(!t.profile)return Object(h.jsx)(w.a,{});return Object(h.jsxs)("div",{className:D.a.info_about_user,children:[Object(h.jsxs)("div",{className:D.a.avatar_name_user,children:[Object(h.jsxs)("div",{className:D.a.user_avatar,children:[Object(h.jsx)("img",{src:(null===(e=t.profile.photos)||void 0===e?void 0:e.large)||(null===(s=t.profile.photos)||void 0===s?void 0:s.small)||"http://assets.stickpng.com/thumbs/585e4beacb11b227491c3399.png",alt:"",className:D.a.info_about_user__avatar}),t.isOwner?Object(h.jsx)("input",{type:"file",onChange:function(e){var s;(null===(s=e.target.files)||void 0===s?void 0:s.length)&&t.savePhoto(e.target.files[0])}}):Object(h.jsx)(h.Fragment,{})]}),Object(h.jsx)("div",{className:D.a.info_about_user__text,children:t.profile.fullName})]}),n?Object(h.jsx)(C,{status:t.status,updateStatus:t.updateStatus,onSubmit:function(e){t.saveProfile(e),i(!1)}}):Object(h.jsx)(E,Object(a.a)(Object(a.a)({},t),{},{toEditMode:function(){i(!0)}}))]})},J=function(t){return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:b.a.top_image,children:Object(h.jsx)("img",{src:"https://s3.tproger.ru/uploads/2016/10/reactmini.png",alt:""})}),Object(h.jsxs)("div",{className:b.a.main_content,children:[Object(h.jsx)(U,{isOwner:t.isOwner,status:t.status,updateStatus:t.updateStatus,savePhoto:t.savePhoto,profile:t.profile,image:"https://cdn-icons-png.flaticon.com/512/25/25231.png",description:"user descr",saveProfile:t.saveProfile}),Object(h.jsx)(I,{})]})]})},L=s(14),T=s(311),q=s(58),B=function(t){Object(n.a)(s,t);var e=Object(i.a)(s);function s(){return Object(o.a)(this,s),e.apply(this,arguments)}return Object(r.a)(s,[{key:"refreshProfile",value:function(){var t=+this.props.match.params.userId;t||(t=this.props.loginedUserId),this.props.getUserProfile(t),this.props.getStatus(t)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,e){this.props.match.params.userId!==t.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(h.jsx)(J,Object(a.a)(Object(a.a)({},this.props),{},{savePhoto:this.props.savePhoto,isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,saveProfile:this.props.saveProfile}))}}]),s}(u.a.Component);e.default=Object(q.d)(Object(l.b)((function(t){return{profile:t.ProfileData.profile,status:t.ProfileData.status,loginedUserId:t.auth.userId}}),{savePhoto:N.e,getUserProfile:N.c,getStatus:N.b,updateStatus:N.g,saveProfile:N.f}),L.h,T.a)(B)}}]);
//# sourceMappingURL=4.5be22287.chunk.js.map